{% extends 'header.html' %}
{% block title %}Hermes | Dashboard{% endblock %}
{% block head %}{{ super() }}{% endblock %}
{% block content %}

<div class="wrapper text-primary class-list">
  {% if not(valid_staff_active_classes or valid_staff_inactive_classes or valid_student_active_classes or valid_student_inactive_classes or invalid_instructor_active_classes or invalid_instructor_inactive_classes|length)%}
    <h1> You are not part of any classes</h1>
    <font size = "+1">
      To fix this do one of the following
      <ul>
        <li> Ask an instructor to enroll you in a class on  <a href="www.okpy.org">Ok (www.okpy.org)</a></li>
        <li> Enroll a class on <a href="www.okpy.org">Ok (www.okpy.org)</a></li>
    </ul>
  While you're waiting to complete one of the above tasks enjoy this video
  <br> </br>
  </font>
    <iframe src="https://www.youtube.com/embed/1YQy-PX019I?ecver=1&amp;iv_load_policy=1&amp;rel=0&amp;yt:stretch=16:9&amp;autohide=1&amp;color=red&amp;width=560&amp;width=560" width="560" height="315" allowtransparency="true" frameborder="0"></iframe>
  {% else %}
    <h2>Welcome, {{user['name']}}</h2>
    <br></br>
      <h3>Classes</h3>
      <h4>Active Classes</h4>
      {% if valid_staff_active_classes or invalid_instructor_active_classes %}
          <h5>Staff Classes</h5>
      {% endif %}
      <div>
      {% for class in valid_staff_active_classes %}
              {% if loop.index%3 == 1 %}
                  <div class="row"> <!-- Start row -->
              {% endif %}
              <div class="col-md-4"><a href="{{ url_for('classpage', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6>{{class['course']['display_name']}} ({{class['role'].capitalize()}})</h6></div></a></div>
              {% if loop.index%3 == 0 %}
                  </div> <!-- End row -->
              {% endif %}
      {% endfor %}

      {% for class in invalid_instructor_active_classes %}
          {% if loop.index%3 == 1 %}
              <div class="row"> <!-- Start row -->
          {% endif %}
          <div class="col-md-4"><a href="{{ url_for('create_class', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6 class = "unregistered">{{class['course']['display_name']}} ({{class['course']['offering'].split("/")[2]}}) ({{class['role'].capitalize()}})</h6></div></a></div>
          {% if loop.index%3 == 0 %}
              </div> <!-- End row -->
          {% endif %}
      {% endfor %}


      {% if ((valid_staff_active_classes|length) +  (invalid_instructor_active_classes|length))%3 != 1 and (valid_staff_active_classes or invalid_instructor_active_classes) %}
          </div> <!-- No more classes, but finish row -->
      {% endif %}
      </div>
      {% if valid_student_active_classes %}
          <h5>Student Classes</h5>
      {% endif %}
      <div>
      {% for class in valid_student_active_classes %}
            {% if loop.index%3 == 1 %}
                <div class="row"> <!-- Start row -->
            {% endif %}
            <div class="col-md-4"><a href="{{ url_for('classpage', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6>{{class['course']['display_name']}} ({{class['course']['offering'].split("/")[2]}}) </h6></div></a></div>
            {% if loop.index%3 == 0 %}
                </div> <!-- End row -->
            {% endif %}
      {% endfor %}
      {% if (valid_student_active_classes|length)%3 != 1 and (valid_student_active_classes) %}
          </div> <!-- No more classes, but finish row -->
      {% endif %}
      </div>
      <br><br>
      <h4>Inactive Classes</h4>
      {% if valid_staff_inactive_classes or invalid_instructor_inactive_classes %}
          <h5>Staff Classes</h5>
      {% endif %}
      <div>
      {% for class in valid_staff_inactive_classes %}
              {% if loop.index%3 == 1 %}
                  <div class="row"> <!-- Start row -->
              {% endif %}
                <div class="col-md-4"><a href="{{ url_for('classpage', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6>{{class['course']['display_name']}} ({{class['course']['offering'].split("/")[2]}}) ({{class['role'].capitalize()}})</h6></div></a></div>
              {% if loop.index%3 == 0 %}
                </div> <!-- End row -->
              {% endif %}
      {% endfor %}
      {% for class in invalid_instructor_inactive_classes %}
            {% if loop.index%3 == 1 %}
                  <div class="row"> <!-- Start row -->
            {% endif %}
              <div class="col-md-4"><a href="{{ url_for('create_class', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6 class="unregistered">{{class['course']['display_name']}} ({{class['course']['offering'].split("/")[2]}}) ({{class['role'].capitalize()}})</h6></div></a></div>
            {% if loop.index%3 == 0 %}
              </div> <!-- End row -->
            {% endif %}
      {% endfor %}

      {% if ((valid_staff_inactive_classes|length) + invalid_instructor_inactive_classes|length)%3 != 1  and (valid_staff_inactive_classes or invalid_instructor_inactive_classes)%}
          </div> <!-- No more classes, but finish row -->
      {% endif %}
      </div>
      {% if valid_student_inactive_classes|length %}
        <h5>Student Classes</h5>
      {% endif %}
      <div>
      {% for class in valid_student_inactive_classes %}
            {% if loop.index%3 == 1 %}
                <div class="row"> <!-- Start row -->
            {% endif %}
            <div class="col-md-4"><a href="{{ url_for('classpage', class_ok_id=class['course']['id']) }}"><div class="class-box"><h6>{{class['course']['display_name']}} ({{class['course']['offering'].split("/")[2]}}) ({{class['role'].capitalize()}})</h6></div></a></div>
            {% if loop.index%3 == 0 %}
                  </div> <!-- End row -->
            {% endif %}
      {% endfor %}
      {% if (valid_student_inactive_classes|length)%3 != 1 and (valid_student_inactive_classes) %}
          </div> <!-- No more classes, but finish row -->
      {% endif %}
      </div>
      {% endif %}
</div>

<script>
/* For code refactoring of creating these class boxes */
</script>

{% endblock %}
{% block footer %}
{{ super() }}
{% endblock %}
